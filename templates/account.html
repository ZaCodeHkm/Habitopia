

{% extends "base.html" %}
{% block title %}Account!{% endblock %}
    {% block css %} 
                <link rel="stylesheet" href="/static/styles/AccountStyles.css">
    {% endblock %}
{% block Pagename %}Account{% endblock %}
{% block heading %}https://habitopia/account{% endblock %}
{% block content %}

    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    <div class="flash-container">
        {% for category, message in messages %}
        <div class="flash-message {{ category }}">
            {{ message }}
            <span class="close-btn" onclick="this.parentElement.style.display='none';">&times;</span>
        </div>
        {% endfor %}
    </div>
    {% endif %}
    {% endwith %}

<div id="wrap">
    <div class="topbox2">
        <ul>
            <li><img src="/static/styles/assets/users-2.png" width=20px class="topboxtext2"></li>
            <li><h5 class="topboxtext2">Account</h5></li>
        </ul>
        <ul>
            <li><img src="/static/styles/assets/exit-active.png" class="icon"></li>
            <li><img src="/static/styles/assets/window-active.png" class="icon"></li>
            <li><img src="/static/styles/assets/minimise-active.png" class="icon"></li>
        </ul>
    </div>
    <div class="nav2">
        <ul>
            <li><button id="openAccModalBtn" onclick="openAccModal()" class="iconbutton"><img src="/static/styles/assets/write_wordpad-1.png" class="icon2" width="20px"><p class="icontext">Edit Account</p></button></li>
                    <div id="accModal" class="modal">
                        <div class="modal-content">
                            <span class="close" onclick="closeAccModal()">&times;</span>
                            <h2>Edit Account</h2>
                            <form action="/edit_account" method="POST" enctype="multipart/form-data">
                                <p>Profile Picture</p>
                                <input type="file" name="img" class="pic" accept="image/jpg, image/jpeg, image/png">
                                <p>Bio</p>
                                <textarea name="bio" placeholder="Tell us about yourself!"></textarea>
                                <button type="submit">Edit Account</button>
                            </form>                
                        </div>
                    </div>
                
            <li><a href="{{url_for('change_password') }}"><button class="iconbutton"><img src="/static/styles/assets/users_key-2.png" class="icon2" width="20px"><p class="icontext">Change Password</p></button></a></li>
            <li><a href="{{ url_for('logout') }}"><button class="iconbutton"><img src="/static/styles/assets/card_reader_not-2.png" class="icon2" width="20px"><p class="icontext">Logout</p></button></a></li>
            <li><form method="POST" action="{{ url_for('delete_account') }}" onsubmit="return confirm('Are you sure you want to delete your account?');">
                    <button type="submit" class="btn btn-danger iconbutton"><img src="/static/styles/assets/recycle_bin_full-2.png" class="icon2" width="20px"><p class="icontext">Delete Account</p></button>
                </form>
            </li>
        </ul>
    </div>
    <div class="wrap2">
        
        {% if profile %}
            <div class="withpic">
                <img src="{{ url_for('get_img', id=profile.id) }}" alt="Profile Picture" width="196px" height="196px">
            </div>
        {% else %}
            <div class="picbox">
                <p>No profile picture available</p>
            </div>
        {% endif %}
        <h2>Welcome, {{ user.username }}!</h2>
        <p>Your user ID: {{ user.id }}</p>
        <p>{{ account.bio }}</p>
        <p>Coins: {{ user_items.coins }}</p>
        <p>Total Pets Owned: {{ pets_owned.petsOwned }}</p>
    </div>
</div>

<script src="/static/styles/habit.js"></script>
{% endblock %}


