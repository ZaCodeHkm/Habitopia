

{% extends "base.html" %}
{% block title %}Account!{% endblock %}
    {% block css %} 
                <link rel="stylesheet" href="/static/styles/AccountStyles.css">
    {% endblock %}
{% block Pagename %}Account{% endblock %}
{% block heading %}https://habitopia/account{% endblock %}
{% block content %}

    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    <div class="flash-container">
        {% for category, message in messages %}
        <div class="flash-message {{ category }}">
            {{ message }}
            <span class="close-btn" onclick="this.parentElement.style.display='none';">&times;</span>
        </div>
        {% endfor %}
    </div>
    {% endif %}
    {% endwith %}

<div id="wrap">
    <h1>Account</h1>
    <h2>Welcome, {{ user.username }}!</h2>
    <p>Your user ID: {{ user.id }}</p>
    {% if profile %}
        <img src="{{ url_for('get_img', id=profile.id) }}" alt="Profile Picture" width="256px" height="256px">
    {% else %}
        <p>No profile picture available</p>
    {% endif %}
    <p>{{ account.bio }}</p>
    <p>Coins: {{ user_items.coins }}</p>
    <p>Total Pets Owned: {{ pets_owned.petsOwned }}</p>


    <button id="openAccModalBtn" onclick="openAccModal()"> Edit Account </button>
        <div id="accModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeAccModal()">&times;</span>
                <h2>Edit Account</h2>
                <form action="/edit_account" method="POST" enctype="multipart/form-data">
                    <p>Profile Picture</p>
                    <input type="file" name="img" class="pic" accept="image/jpg, image/jpeg, image/png">
                    <p>Bio</p>
                    <textarea name="bio" placeholder="Tell us about yourself!"></textarea>
                    <button type="submit">Edit Account</button>
                </form>                
            </div>
        </div>
    <div>
        <a href="{{url_for('change_password') }}">Change Password</a>
    </div>
    <div>
        <a href="{{url_for('logout') }}">Log out</a>
    </div>

    


    <form method="POST" action="{{ url_for('delete_account') }}" onsubmit="return confirm('Are you sure you want to delete your account?');">
        <button type="submit" class="btn btn-danger">Delete Account</button>
    </form>
</div>

<script src="/static/styles/habit.js"></script>
{% endblock %}


